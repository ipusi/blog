jQuery.magicCanvas={reqId:0,draw:function(t){function e(){x=document.getElementById("reactive-bg-canvas"),p=$(window).width(),y=$(window).height(),x.style.position="fixed",x.style.zIndex=F.zIndex,x.style.top="0px",x.style.left="0px",x.width=p,x.height=y,T={x:p/2,y:y/2,rx:p/2,ry:y/2},M=x.getContext("2d"),v()}function n(){T.x=T.rx+document.body.scrollLeft+document.documentElement.scrollLeft,T.y=T.ry+document.body.scrollTop+document.documentElement.scrollTop}function o(t){t.pageX||t.pageY?(T.x=t.pageX,T.y=t.pageY):(t.clientX||t.clientY)&&(T.x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,T.y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),T.rx=t.clientX,T.ry=t.clientY}function i(){p=window.innerWidth,y=window.innerHeight,x.width=p,x.height=y,this.reqId&&window.cancelAnimationFrame(this.reqId),e(),r()}function r(){if(this.reqId&&w(this.reqId),"heart-beat"==F.type)setInterval(c,F.heartBeatCD);else if("random-move"==F.type){a();for(var t=0;t<b.length;t++)s(b[t])}}function a(){if(M.clearRect(0,0,p,y),"heart-beat"==F.type){for(var t=0,e=0;e<B.length;e++){var n=B[e];n.circle.active>0?(n.circle.active-=.012,n.circle.draw()):t++}if(B.length>0&&t==B.length)return void(B=[])}else if("random-move"==F.type)for(var o=g(),e=0;e<b.length;e++)Math.abs(m(o,b[e]))<4e3?(b[e].active=.3,b[e].circle.active=.6):Math.abs(m(o,b[e]))<2e4?(b[e].active=.1,b[e].circle.active=.3):Math.abs(m(o,b[e]))<4e4?(b[e].active=.02,b[e].circle.active=.1):(b[e].active=0,b[e].circle.active=0),d(b[e]),b[e].circle.draw();this.reqId=requestAnimationFrame(a)}function c(){a();var t=l(),e=new u(t,0),n=F.heartBeatRange/144,o=.8,i=g();B=[];var r=function(){if(e.radius<F.heartBeatRange){for(var t=0;t<b.length;t++){var a=b[t];if(m(a,e.pos)<Math.pow(e.radius,2))for(var c=0;c<a.closest.length;c++){var s=a.closest[c],l=f(a,s,e);void 0!=l&&(l.circle=new u(l,1.2,i),l.circle.active=o,o*=.999,B.push(l))}}setTimeout(r,2400/144),e.radius+=n}};q&&r()}function s(t){TweenLite.to(t,1+Math.random(),{x:t.originX-50+100*Math.random(),y:t.originY-50+100*Math.random(),onComplete:function(){s(t)}})}function l(){for(var t={x:-100,y:-100},e=g(),n=0;n<b.length;n++){var o=b[n];t=m(e,o)<m(e,t)?o:t}return t}function h(t,e){var n=F.lineLen*Math.sin(60*Math.PI/180),o=F.lineLen*Math.cos(60*Math.PI/180),i={closest:[]};return"left"==e||"right"==e?(i.x=t.x+F.lineLen*("left"==e?-1:1),i.y=t.y):"rightTop"==e||"rightBottom"==e?(i.x=t.x+o,i.y=t.y+n*("rightTop"==e?-1:1)):("leftTop"==e||"leftBottom"==e)&&(i.x=t.x-o,i.y=t.y+n*("leftTop"==e?-1:1)),i.type=e,t.closest.push(i),i.closest.push(t),i}function f(t,e,n){var o=m(t,n.pos),i=m(e,n.pos),r=Math.sqrt(Math.max(o,i));if(Math.sqrt(Math.min(o,i))<n.radius&&r>n.radius){var a=(t.y-e.y)/(t.x-e.x),c=t.y-a*t.x,s=-n.pos.x,l=-n.pos.y,h=n.radius,f=(Math.pow(a,2)+1)*Math.pow(h,2)-Math.pow(s*a,2)+2*(s*l+c*s)*a-Math.pow(l+c,2),u=(-1*Math.sqrt(f)-a*(l+c)-s)/(Math.pow(a,2)+1),d=(Math.sqrt(f)-a*(l+c)-s)/(Math.pow(a,2)+1),v=u<Math.max(t.x,e.x)&&u>Math.min(t.x,e.x)?u:d;return{x:v,y:a*v+c}}}function u(t,e,n){this.pos=t||null,this.radius=e||null,this.centerP=n,this.draw=function(){if(this.active){M.beginPath(),M.arc(this.pos.x,this.pos.y,this.radius,0,2*Math.PI,!1);var t="function"==typeof F.rgb?F.rgb(this.pos,this.centerP||this.pos):F.rgb;t="".concat(t.r).concat(",").concat(t.g).concat(",").concat(t.b),M.fillStyle="rgba("+t+","+this.active+")",M.fill()}}}function d(t){if(t.active)for(var e=0;e<t.closest.length;e++){M.beginPath(),M.moveTo(t.x,t.y),M.lineTo(t.closest[e].x,t.closest[e].y);var n="function"==typeof F.rgb?F.rgb(T):F.rgb;n="".concat(n.r).concat(",").concat(n.g).concat(",").concat(n.b),M.strokeStyle="rgba("+n+","+t.active+")",M.stroke()}}function m(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)}function v(){if("random-move"==F.type){b=[];for(var t=0;p>t;t+=p/20)for(var e=0;y>e;e+=y/20){var n=t+Math.random()*p/20,o=e+Math.random()*y/20,i={x:n,originX:n,y:o,originY:o};b.push(i)}for(var r=0;r<b.length;r++){for(var a=[],c=b[r],s=0;s<b.length;s++){var l=b[s];if(c!=l){for(var f=!1,d=0;5>d;d++)f||void 0==a[d]&&(a[d]=l,f=!0);for(var d=0;5>d;d++)f||m(c,l)<m(c,a[d])&&(a[d]=l,f=!0)}}c.closest=a}for(var r=0;r<b.length;r++)b[r].circle=new u(b[r],2+2*Math.random(),void 0)}else if("heart-beat"==F.type){var v={x:p/2,y:y/2,closest:[]},g=[h(v,"left"),h(v,"rightTop"),h(v,"rightBottom")];for(b=[v];g.length>0;){var i=g.pop();if(0<i.x&&i.x<p&&0<i.y&&i.y<y){for(var w=!1,r=0;r<b.length;r++){var x=b[r],M=m(i,x);if(M<.1*Math.pow(F.lineLen,2)){w=!0;break}}if(!w){b.push(i);var T=i.type;"leftTop"==T||"leftBottom"==T?(g.unshift(h(i,"left")),g.unshift(h(i,"leftTop"==T?"rightTop":"rightBottom"))):"rightTop"==T||"rightBottom"==T?(g.unshift(h(i,"right")),g.unshift(h(i,"rightTop"==T?"leftTop":"leftBottom"))):"left"==T?(g.unshift(h(i,"leftBottom")),g.unshift(h(i,"leftTop"))):"right"==T&&(g.unshift(h(i,"rightBottom")),g.unshift(h(i,"rightTop")))}}}for(var r=0;r<b.length;r++)b[r].circle=new u(b[r],2)}}function g(){return{x:T.x-I.offset().left,y:T.y-I.offset().top}}function w(t){for(var e=0,n=["ms","moz","webkit","o"],o=0;o<n.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[n[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[o]+"CancelAnimationFrame"]||window[n[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var o=(new Date).getTime(),i=Math.max(0,16-(o-e)),r=window.setTimeout(function(){t(o+i)},i);return e=o+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),t&&window.cancelAnimationFrame(t)}w();var p,y,x,M,b,T,q=!0,B=[],I=$("#reactive-bg-canvas"),A={lineLen:30,heartBeatCD:3e3,heartBeatRange:300,rgb:{r:156,g:217,b:249},type:"heart-beat",zIndex:-99999},F=$.extend(A,t);$(document).mouseenter(function(){q=!0}),$(document).mouseleave(function(){q=!1}),e(),r(),function(){"ontouchstart"in window||window.addEventListener("mousemove",o),window.addEventListener("scroll",n),window.addEventListener("resize",i)}()}};